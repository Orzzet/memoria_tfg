\chapter{Planteamiento inicial}\label{planinicial}

\section{Plan inicial}\label{sec:planinicial}

El primer enfoque para abordar este proyecto fue utilizar herramientas actuales de machine learning para la segmentación semántica de las imágenes provistas y, a partir de los resultados obtenidos, investigar cómo mejorar la segmentación. Sin embargo esto no fue posible debido a la alta resolución de las imágenes provistas y al limitado acceso a hardware de alto rendimiento. Por ello se ideó un plan inicial en el que se construía una herramienta que tuviese menor requisito de hardware. La mayor limitación era por la VRAM necesaria, por lo que se pensó en utilizar Apache Spark \cite{apachespark} para aprovechar HDD y RAM.

En este primer plan se dividieron las tareas en fases, siendo la fase 0 realmente un proceso de iniciación, necesaria para planificar el resto de las fases.

\begin{itemize}
\item[\textbf{Fase 0}] Estudio previo. Investigar las soluciones actuales al problema o problemas similares, las posibles técnicas de machine learning a usar en este proyecto y tecnologías para implementarlas.
\item[\textbf{Fase 1}] Aprender a implementar una CNN en Python. Usar datos de prueba para familiarizarme con las tecnologías a usar en este proyecto. Se explica en más detalle por qué usar CNN en la sección \ref{sec:archs}. El uso de Python se explica en la sección \ref{subsec:language}.
\item[\textbf{Fase 2}] Implementar, entrenar y probar una o más CNN.
\item[\textbf{Fase 3}] Analizar resultados obtenidos.
\item[\textbf{Fase 4}] Investigar sobre mejoras pre y post procesado.
\item[\textbf{Fase 5}] Realizar estas operaciones usando Apache Spark.
\item[\textbf{Fase 6}] Hacer que el entrenamiento y la inferencia sean usables por un usuario.
\end{itemize}

\section{Nueva metodología}\label{sec:metodologia}

Gracias a la investigación inicial realizada en la \textbf{Fase 0} se pudo definir el resto de fases del plan inicial, aunque no se tuvieron en cuenta varios factores que se empezaron a ver en la \textbf{Fase 1} y \textbf{Fase 2}. Esto provocó que se tuviese que realizar un ajuste en el plan inicial. 
Lo que no se tuvo en cuenta fue:

\begin{itemize}
\item Las fases 2, 3 y 4 deben ser fases iterativas. Cada vez que se obtengan resultados hay que estudiarlos y hacer cambios para mejorar los resultados.
\item No se tiene en cuenta el rendimiento de los algoritmos utilizados ni los cuellos de botella.
\item Se quiere usar Spark con la premisa de aprovechar la RAM o el HDD cuando la VRAM se agote, pero esto no es viable ya en la VRAM se tiene que poder almacenar toda la información necesaria para ejecutar cada algoritmo.
\end{itemize}

Por todo ello, se buscó información sobre una metodología adecuada. El capítulo 11 del libro Deep Learning \cite{Goodfellow2016} habla sobre una metodología práctica para la aplicación de técnicas en deep learning. Esta metodología se centra en utilizar feedback del sistema construido en cada iteración para modificar el sistema acorde a los objetivos. Los pasos a seguir propuestos por esta metodología son:

\begin{enumerate}
\item Determinar las metas. Qué métrica usar como error y un valor de la métrica aceptable como objetivo.
\item Establecer lo antes posible un sistema completo que pueda dar un valor para dicha métrica.
\item Utilizar herramientas adecuadas para determinar cuellos de botella en el rendimiento. Comprobar qué componentes están dando peores resultados en el sistema y comprobar si los resultados negativos son debidos a overfitting, underfitting, a un fallo con los datos o en el software.
\item Hacer cambios de forma a los datos, ajuste de hiperparámetros o cambiar algoritmos con el objetivo de mejorar la métrica usada. Volver al punto 3.
\end{enumerate}

Estos pasos se resumirán como ``desarrollo del sistema" y constituirá la mayor parte del proyecto.

\section{Plan seguido}\label{sec:planactualizado}

\begin{itemize}
\item[\textbf{Fase 0}] Estudio previo. En esta fase se investigará sobre artículos de segmentación celular y se aprenderá sobre machine learning y las tecnologías necesarias para llevar a cabo resultados similares aplicados al problema actual.
\item[\textbf{Fase 1}] Desarrollo del sistema. Aplicar la metodología de la sección \ref{sec:metodologia}.
\begin{enumerate}
\item Determinar metas con métricas.
\item Sistema inicial.
\item Usar herramientas para determinar cuellos de botella en el rendimiento.
\item Cambios en el sistema.
\item Si no se ha alcanzado el valor objetivo de la métrica, volver al punto 3.
\end{enumerate}
\item[\textbf{Fase 2}] Mejoras de usabilidad. Que el proyecto sea usable por un usuario.
\item[\textbf{Fase 3}] Cierre. Terminar de escribir la memoria con los resultados obtenidos, las conclusiones, tabla de tiempos y manual de usuario.
\end{itemize}
